When a function is big and complex, a good way of improve the legibility and maintainability is replace with command